@model IEnumerable<EpicCrmWebApi.DWSPaymentReferenceModel>
@{
    int itemCount = Model.Count();
    string displayString = $"{itemCount} rows displayed.";
}

<div>
    <h3>
        <a href="" title="Refresh Search Result" onclick="btnSearchClicked();return false;">
            <img height="25" width="25" src="~/Content/img/refresh.png" /></a>&nbsp;Payment Batches (@Model.Count())
    </h3>
</div>
@if (Model.Count() > 0)
{
    <table class="table table-bordered table-striped" id="dataTable">
        <tr>
            <th style="column-width:45px;" id="downloadLinkArea" class="removeFromDownload">&nbsp;</th>

            <th>@Html.DisplayNameFor(model => model.DateCreated)</th>
            <th>@Html.DisplayNameFor(model => model.PaymentReference)</th>
            <th>@Html.DisplayNameFor(model => model.TotalNetPayable)</th>
            <th>@Html.DisplayNameFor(model => model.DWSCount)</th>
            <th>@Html.DisplayNameFor(model => model.DWSNumbers)</th>
            <th>@Html.DisplayNameFor(model => model.Comments)</th>
            <th>@Html.DisplayNameFor(model => model.CreatedBy)</th>

            <th>@Html.DisplayNameFor(model => model.AccountNumber)</th>
            <th>@Html.DisplayNameFor(model => model.AccountName)</th>
            <th>@Html.DisplayNameFor(model => model.AccountAddress)</th>
            <th>@Html.DisplayNameFor(model => model.AccountEmail)</th>
            <th>@Html.DisplayNameFor(model => model.PaymentType)</th>
            <th>@Html.DisplayNameFor(model => model.SenderInfo)</th>
        </tr>
        @foreach (var item in Model.OrderByDescending(x=> x.DateCreated))
        {
            var downloadCellGuid = Guid.NewGuid().ToString();
            <tr>
                <td class="removeFromDownload" id="@downloadCellGuid">
                    <a href="" title="Download @item.PaymentReference Payment File" onclick="PaymentFileDownloadClicked('@item.PaymentReference', '@downloadCellGuid'); return false;">Download Payment File</a>
                </td>

                <td>@Html.DisplayFor(modelItem => item.DateCreated)</td>
                <td>@Html.DisplayFor(modelItem => item.PaymentReference)</td>
                <td>@Html.DisplayFor(modelItem => item.TotalNetPayable)</td>
                <td>@Html.DisplayFor(modelItem => item.DWSCount)</td>
                <td>@Html.DisplayFor(modelItem => item.DWSNumbers)</td>
                <td>@Html.DisplayFor(modelItem => item.Comments)</td>
                <td>@Html.DisplayFor(modelItem => item.CreatedBy)</td>

                <td>@Html.DisplayFor(modelItem => item.AccountNumber)</td>
                <td>@Html.DisplayFor(modelItem => item.AccountName)</td>
                <td>@Html.DisplayFor(modelItem => item.AccountAddress)</td>
                <td>@Html.DisplayFor(modelItem => item.AccountEmail)</td>
                <td>@Html.DisplayFor(modelItem => item.PaymentType)</td>
                <td>@Html.DisplayFor(modelItem => item.SenderInfo)</td>
            </tr>
        }
    </table>
}
